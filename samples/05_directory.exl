main:
DATA @1000 "Directory lister"
# 1 -- Open Dir
DATA @1030 1
# 2 -- Get file information
DATA @1040 2
# 3 -- Close Dir
DATA @1050 3
# File counter
DATA @1060 0
DATA @2000 "."
SPRINTLN @1000
SET @20 @2000
SET @10 @1030
SYS 1
SET @1080 @20
CALL 1
---
loop_files:
SET @10 @1040
SET @20 @1060
SYS 1
SPRINTLN @30
INC @1060
CMP @1060 @1080
JE 2
GOTO 0
---
exit:
HALT
---